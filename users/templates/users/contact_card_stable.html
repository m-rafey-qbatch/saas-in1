{% load static %}


<div class="container mt-5 mb-5">
    <div id="contact_card_stable">
<div class="card smartphone-card" style="background: linear-gradient(145deg, #f3f4f6, #d1d2d4); box-shadow: 6px 6px 12px #b8b9bb, -6px -6px 12px #ffffff;">
    <div class="card-body">
        <div class="contact-card" style="position: relative; width: 300px; padding: 10px; border-radius: 10px; margin: 0 auto; text-align: center;">

            <!-- NFT Image -->
            <div style="position: relative;">
                <img src="https://gateway.ipfs.io/ipfs/{{ request.user.nft.image_ipfs_uri }}" alt="Minted NFT Image" style="width: 100%; height: auto; object-fit: cover; border-radius: 5px; border: none; display: block; margin-left: auto; margin-right: auto; box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.2);">
                <div style="position: absolute; bottom: 0px; width: 100%; text-align: center; background-color: rgba(255,255,255,0.7); padding: 5px 0; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; font-size: 12px; color: #333; font-family: Arial, sans-serif;">
                    Blockchain and AI/ML Verified Identity
                </div>
            </div>

            <!-- Full Name and Title -->
            <div class="contact-info" style="padding-top: 10px;">
                <span class="full-name" style="font-size: 28px; display: block; font-weight: bold; font-family: Arial, sans-serif;">{{ request.user.personal_profile.full_name }}</span>
                <span class="title" style="font-size: 18px; display: block; font-family: Arial, sans-serif; margin-bottom: 10px;">{{ request.user.personal_profile.title }}</span>
            </div>

            <!-- Company Logo and Name -->
            <div style="display: flex; align-items: center; justify-content: center; font-family: Arial, sans-serif; padding: 20px 0;">
                <img src="https://gateway.ipfs.io/ipfs/{{ request.user.company_profile.company_logo_ipfs_uri }}" alt="Company Logo" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 8px;">
                <span style="font-weight: 700; font-size: 24px;">{{ request.user.company_profile.comp }}</span>
            </div>
        </div>

        <img src="{% url 'display_qr_code' %}" alt="Contact Info QR Code" style="display: block; margin-left: auto; margin-right: auto;">

    </div>
</div>
</div>
</div>

<button onclick="dl_card()">
    Save as Image
</button>

<button onclick="dl_card()">
    Send to Phone
</button>


<script>
    function dl_card() {
            let div =
                document.getElementById('contact_card_stable');
           
            html2canvas(div).then(
                function (canvas) {
                    var link = document.createElement('a');
                    link.href = canvas.toDataURL();
                    link.download = 'screenshot.png';
                    link.click();
                })
        }
    </script>

</script>